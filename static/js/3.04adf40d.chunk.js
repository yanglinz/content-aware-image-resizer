(this["webpackJsonpcontent-aware-image-resizer"]=this["webpackJsonpcontent-aware-image-resizer"]||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(7),i=n(12),c=n(8),o=n(4);var s=n(9),l=n(17),u=n(3),d=["children","intent"];var h=function(e){var t=e.children,n=e.intent,r=Object(l.a)(e,d),a="rounded-md drop-shadow\tpx-5 py-3 text-base font-large focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50";return"PRIMARY"===n&&(a+=" border border-gray-300 bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-500"),"SECONDARY"===n&&(a+=" border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"),Object(u.jsx)("button",Object(s.a)(Object(s.a)({className:a},r),{},{children:t}))};function f(e){return c.a.createPortal(e.children,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog-mount",t=document.getElementById(e);return t||((t=document.createElement("div")).id=e,document.body.appendChild(t)),t}())}function g(e){return Object(u.jsx)(f,{children:Object(u.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",role:"dialog","aria-modal":"true",children:Object(u.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(u.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(u.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(u.jsx)("div",{className:"inline-block align-bottom bg-white rounded-sm text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.children})]})})})}var m=function(e){var t=e.globalState,n=e.handleImageSelect,a=e.handleClose;if("IMAGE_SELECT"!==t.control.state)return null;var i=[["yRjLihK35Yw","title"],["e-S-Pe2EmrE","Birds in the sky"],["F6XKjhMNB14","Waves on a beach"],["KGwK6n7rxSg","Hot balloons"],["C9XgrB8hqBI","Top down shot of beach"],["pVr6wvUneMk","Desert landscape"],["Pn6iimgM-wo","Light house at night"],["4Oi1756LtF4","Castle"]].map((function(e){var t=Object(r.a)(e,2),n=t[0];return{alt:t[1],url:"https://source.unsplash.com/".concat(n,"/1000x500"),previewUrl:"https://source.unsplash.com/".concat(n,"/200x150")}}));return Object(u.jsxs)(g,{children:[Object(u.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(u.jsxs)("div",{className:"flex flex-col content-center items-center",children:[Object(u.jsx)("h3",{className:"my-3 text-lg leading-6 font-medium text-gray-900",children:"Select Image"}),Object(u.jsx)("div",{className:"overflow-hidden grid grid-cols-4 gap-1",children:i.map((function(e){return Object(u.jsx)("img",{className:"inline-block h-20 w-20 rounded-full",onClick:function(){return n(e.url)},alt:e.alt,src:e.previewUrl})}))})]})}),Object(u.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:Object(u.jsx)(h,{intent:"SECONDARY",onClick:a,children:"Cancel"})})]})};function b(){return{source:document.getElementById("canvas-source"),target:document.getElementById("canvas-target")}}var j=function(e){var t=e.globalState.selectedImage,n="SOURCE"===t.state?"":"hidden",r="TARGET"===t.state?"":"hidden";return Object(u.jsxs)("div",{className:"border-8 border-gray-600 border-opacity-5",children:[Object(u.jsx)("div",{className:n,children:Object(u.jsx)("canvas",{id:"canvas-source"})}),Object(u.jsx)("div",{className:r,children:Object(u.jsx)("canvas",{id:"canvas-target"})})]})};function v(e){var t=e.minWidth,n=e.maxWidth,i=e.disabled,c=e.onChange,o=Object(a.c)(n),l=Object(r.a)(o,2),d=l[0],h=l[1],f={disabled:!0};return i||(f={min:t,max:n,value:d,onChange:function(e){var t=parseInt(e.target.value);h(t),c(t)}}),Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsxs)("div",{className:"flex w-11/12 sm:w-8/12 align-center",children:[Object(u.jsx)("input",Object(s.a)({id:"resize",name:"resize",type:"range",className:"flex-grow"},f)),Object(u.jsxs)("label",{className:"font-mono w-20 text-right text-gray-700",for:"resize",children:[i?0:d,"px"]})]})})}var p,x=function(e){var t=e.globalState,n=e.handleResize,i=e.handleOpenImageSelect,c=t.selectedImage,o=Object(a.c)(0),s=Object(r.a)(o,2),l=s[0],d=s[1],f="SOURCE"===c.state&&0!==l&&l!==c.width;return Object(u.jsxs)("div",{className:"Controls",children:[Object(u.jsx)("div",{className:"pb-3",children:Object(u.jsx)(v,{disabled:"SOURCE"!==c.state,minWidth:20,maxWidth:c.width,onChange:d},c.url)}),Object(u.jsx)("div",{className:"flex justify-center",children:Object(u.jsxs)("div",{className:"flex",children:[Object(u.jsx)(h,{intent:"PRIMARY",disabled:!f,onClick:function(){return n(l)},children:"Resize Image"}),Object(u.jsx)("div",{className:"px-1"}),Object(u.jsx)(h,{intent:"SECONDARY",onClick:i,children:"Try Another Image"})]})})]})},O=(n(11),{selectedImage:{state:"INITIAL",url:null,width:0,height:0},control:{state:"INITIAL"}}),y={SOURCE_IMAGE_LOADED:function(e,t){var n=t.payload,r=n.width,a=n.height,i=n.url;e.selectedImage.state="SOURCE",e.selectedImage.width=r,e.selectedImage.height=a,e.selectedImage.url=i},RESIZE_INITIALIZED:function(e,t){e.selectedImage.state="TARGET"},IMAGE_SELECT_OPENED:function(e,t){e.control.state="IMAGE_SELECT"},IMAGE_SELECT_CLOSED:function(e,t){e.control.state="INITIAL"}};function w(e,t){var n=y[t.type];if(!n)throw new Error("Unknown action type in reducer.");return Object(i.a)(e,(function(e){return n(e,t)}))}function E(){var e=Object(a.b)(w,O),t=Object(r.a)(e,2),n=t[0],i=t[1];function c(e){var t=b().source;return fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e)})).then((function(n){t.width=n.width,t.height=n.height;var r=t.getContext("2d");r.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height);r.getImageData(0,0,t.width,t.height);i({type:"SOURCE_IMAGE_LOADED",payload:{width:t.width,height:t.height,url:e}})}))}return Object(a.a)((function(){return c("https://source.unsplash.com/yRjLihK35Yw/500x250")}),[]),Object(u.jsxs)("div",{className:"App flex flex-col h-screen",children:[Object(u.jsx)("div",{className:"flex-grow",children:Object(u.jsx)("div",{className:"flex items-center\tjustify-center h-full",children:Object(u.jsx)(j,{globalState:n})})}),Object(u.jsx)("div",{className:"border-t border-gray-150 p-10 bg-white",children:Object(u.jsx)(x,{globalState:n,handleResize:function(e){var t=b(),n=t.source,r=t.target,a=o.a.new(n.getContext("2d"),n.width,n.height);function c(){var e=a.image_data_ptr(),t=new Uint8ClampedArray(Object(o.k)().buffer,e,a.width*a.height*4);r.width=a.width,r.height=a.height;var n=new ImageData(t,a.width,a.height);r.getContext("2d").putImageData(n,0,0)}var s=n.width-e;requestAnimationFrame((function e(){s<=0||(a.mark_seam(),c(),requestAnimationFrame((function(){a.delete_seam(),c(),s-=1,requestAnimationFrame(e)})))})),i({type:"RESIZE_INITIALIZED"})},handleOpenImageSelect:function(){return i({type:"IMAGE_SELECT_OPENED"})}})}),Object(u.jsx)(m,{globalState:n,handleImageSelect:function(e){c(e),i({type:"IMAGE_SELECT_CLOSED"})},handleClose:function(){return i({type:"IMAGE_SELECT_CLOSED"})}})]})}p=function(){c.a.render(Object(u.jsx)(E,{}),document.getElementById("app"))},"loading"!=document.readyState?p():document.addEventListener("DOMContentLoaded",p)},11:function(e,t,n){},16:function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(4);r.q()},4:function(e,t,n){"use strict";(function(e){n.d(t,"k",(function(){return w})),n.d(t,"a",(function(){return I})),n.d(t,"i",(function(){return N})),n.d(t,"d",(function(){return S})),n.d(t,"b",(function(){return C})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return A})),n.d(t,"g",(function(){return T})),n.d(t,"j",(function(){return D})),n.d(t,"h",(function(){return L}));var r=n(14),a=n(15),i=n(16),c=new Array(32).fill(void 0);function o(e){return c[e]}c.push(void 0,null,!0,!1);var s=c.length;function l(e){var t=o(e);return function(e){e<36||(c[e]=s,s=e)}(e),t}function u(e){var t=typeof e;if("number"==t||"boolean"==t||null==e)return"".concat(e);if("string"==t)return'"'.concat(e,'"');if("symbol"==t){var n=e.description;return null==n?"Symbol":"Symbol(".concat(n,")")}if("function"==t){var r=e.name;return"string"==typeof r&&r.length>0?"Function(".concat(r,")"):"Function"}if(Array.isArray(e)){var a=e.length,i="[";a>0&&(i+=u(e[0]));for(var c=1;c<a;c++)i+=", "+u(e[c]);return i+="]"}var o,s=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(s.length>1))return toString.call(e);if("Object"==(o=s[1]))try{return"Object("+JSON.stringify(e)+")"}catch(l){return"Object"}return e instanceof Error?"".concat(e.name,": ").concat(e.message,"\n").concat(e.stack):o}var d=0,h=null;function f(){return null!==h&&h.buffer===i.k.buffer||(h=new Uint8Array(i.k.buffer)),h}var g=new("undefined"===typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),m="function"===typeof g.encodeInto?function(e,t){return g.encodeInto(e,t)}:function(e,t){var n=g.encode(e);return t.set(n),{read:e.length,written:n.length}};function b(e,t,n){if(void 0===n){var r=g.encode(e),a=t(r.length);return f().subarray(a,a+r.length).set(r),d=r.length,a}for(var i=e.length,c=t(i),o=f(),s=0;s<i;s++){var l=e.charCodeAt(s);if(l>127)break;o[c+s]=l}if(s!==i){0!==s&&(e=e.slice(s)),c=n(c,i,i=s+3*e.length);var u=f().subarray(c+s,c+i);s+=m(e,u).written}return d=s,c}var j=null;function v(){return null!==j&&j.buffer===i.k.buffer||(j=new Int32Array(i.k.buffer)),j}var p=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function x(e,t){return p.decode(f().subarray(e,e+t))}function O(e){s===c.length&&c.push(c.length+1);var t=s;return s=c[t],c[t]=e,t}p.decode();var y=32;function w(){return l(i.p())}function E(e,t){try{return e.apply(this,t)}catch(n){i.g(O(n))}}var I=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();i.d(e)}},{key:"width",get:function(){return i.c(this.ptr)>>>0},set:function(e){i.f(this.ptr,e)}},{key:"height",get:function(){return i.b(this.ptr)>>>0},set:function(e){i.e(this.ptr,e)}},{key:"mark_seam",value:function(){i.n(this.ptr)}},{key:"delete_seam",value:function(){i.l(this.ptr)}},{key:"image_data_ptr",value:function(){return i.m(this.ptr)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(t,n,r){try{var a=i.o(function(e){if(1==y)throw new Error("out of js stack");return c[--y]=e,y}(t),n,r);return e.__wrap(a)}finally{c[y++]=void 0}}}]),e}();function N(e){l(e)}function S(){return E((function(e,t,n,r,a){return O(o(e).getImageData(t,n,r,a))}),arguments)}function C(e,t){var n=function(e,t){var n=t(1*e.length);return f().set(e,n/1),d=e.length,n}(o(t).data,i.i),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function _(){return O(new Error)}function k(e,t){var n=b(o(t).stack,i.i,i.j),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function A(e,t){try{console.error(x(e,t))}finally{i.h(e,t)}}function T(e,t){var n=b(u(o(t)),i.i,i.j),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function D(e,t){throw new Error(x(e,t))}function L(){return O(i.k)}}).call(this,n(13)(e))}}]);
//# sourceMappingURL=3.04adf40d.chunk.js.map