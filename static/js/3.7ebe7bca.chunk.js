(this["webpackJsonpcontent-aware-image-resizer"]=this["webpackJsonpcontent-aware-image-resizer"]||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(7),i=n(11),c=n(8),o=n(3);var s=n(4);function u(e){return c.a.createPortal(e.children,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dialog-mount",t=document.getElementById(e);return t||((t=document.createElement("div")).id=e,document.body.appendChild(t)),t}())}function l(e){return Object(s.jsx)(u,{children:Object(s.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",role:"dialog","aria-modal":"true",children:Object(s.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(s.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),Object(s.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(s.jsx)("div",{className:"inline-block align-bottom bg-white rounded-sm text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:e.children})]})})})}var d=function(e){var t=e.globalState,n=e.handleImageSelect,a=e.handleClose;if("IMAGE_SELECT"!==t.control.state)return null;var i=[["yRjLihK35Yw","title"],["e-S-Pe2EmrE","Birds in the sky"],["F6XKjhMNB14","Waves on a beach"],["KGwK6n7rxSg","Hot balloons"],["C9XgrB8hqBI","Top down shot of beach"],["pVr6wvUneMk","Desert landscape"],["Pn6iimgM-wo","Light house at night"],["4Oi1756LtF4","Castle"]].map((function(e){var t=Object(r.a)(e,2),n=t[0];return{alt:t[1],url:"https://source.unsplash.com/".concat(n,"/1000x500"),previewUrl:"https://source.unsplash.com/".concat(n,"/200x150")}}));return Object(s.jsxs)(l,{children:[Object(s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(s.jsxs)("div",{className:"flex flex-col content-center items-center",children:[Object(s.jsx)("h3",{className:"my-3 text-lg leading-6 font-medium text-gray-900",children:"Select Image"}),Object(s.jsx)("div",{className:"overflow-hidden grid grid-cols-4 gap-1",children:i.map((function(e){return Object(s.jsx)("img",{className:"inline-block h-20 w-20 rounded-full",onClick:function(){return n(e.url)},alt:e.alt,src:e.previewUrl})}))})]})}),Object(s.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:Object(s.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:a,children:"Cancel"})})]})};function h(){return{source:document.getElementById("canvas-source"),target:document.getElementById("canvas-target")}}var f=function(e){var t=e.globalState.selectedImage,n="SOURCE"===t.state?"":"hidden",r="TARGET"===t.state?"":"hidden";return Object(s.jsxs)("div",{className:"border-8 border-gray-600 border-opacity-5",children:[Object(s.jsx)("div",{className:n,children:Object(s.jsx)("canvas",{id:"canvas-source"})}),Object(s.jsx)("div",{className:r,children:Object(s.jsx)("canvas",{id:"canvas-target"})})]})};function m(e){var t=e.minWidth,n=e.maxWidth,i=e.onChange,c=Object(a.c)(n),o=Object(r.a)(c,2),u=o[0],l=o[1];return Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)("input",{id:"resize",name:"resize",type:"range",className:"w-80 mr-3",min:t,max:n,value:u,onChange:function(e){var t=parseInt(e.target.value);l(t),i(t)}}),Object(s.jsxs)("label",{for:"resize",children:[u,"px"]})]})}function g(){return Object(s.jsx)("div",{className:"flex",children:Object(s.jsx)("input",{id:"resize",name:"resize",type:"range",className:"w-80 mr-3",disabled:!0})})}var b,j=function(e){var t=e.globalState,n=e.handleResize,i=e.handleOpenImageSelect,c=t.selectedImage,o=Object(a.c)(0),u=Object(r.a)(o,2),l=u[0],d=u[1],h="SOURCE"===c.state&&0!==l&&l!==c.width;return Object(s.jsxs)("div",{className:"Controls",children:[Object(s.jsx)("div",{className:"pb-3",children:"SOURCE"===c.state?Object(s.jsx)(m,{minWidth:20,maxWidth:c.width,onChange:d},c.url):Object(s.jsx)(g,{})}),Object(s.jsxs)("div",{className:"flex",children:[Object(s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",disabled:!h,onClick:function(){return n(l)},children:"Resize Image"}),Object(s.jsx)("div",{className:"px-1"}),Object(s.jsx)("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-2 px-4 rounded disabled:opacity-50",onClick:i,children:"Try Another Image"})]})]})},v=(n(10),{selectedImage:{state:"INITIAL",url:null,width:0,height:0},control:{state:"INITIAL"}}),p={SOURCE_IMAGE_LOADED:function(e,t){var n=t.payload,r=n.width,a=n.height,i=n.url;e.selectedImage.state="SOURCE",e.selectedImage.width=r,e.selectedImage.height=a,e.selectedImage.url=i},RESIZE_INITIALIZED:function(e,t){e.selectedImage.state="TARGET"},IMAGE_SELECT_OPENED:function(e,t){e.control.state="IMAGE_SELECT"},IMAGE_SELECT_CLOSED:function(e,t){e.control.state="INITIAL"}};function x(e,t){var n=p[t.type];if(!n)throw new Error("Unknown action type in reducer.");return Object(i.a)(e,(function(e){return n(e,t)}))}function y(){var e=Object(a.b)(x,v),t=Object(r.a)(e,2),n=t[0],i=t[1];function c(e){var t=h().source;return fetch(e).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e)})).then((function(n){t.width=n.width,t.height=n.height;var r=t.getContext("2d");r.drawImage(n,0,0,n.width,n.height,0,0,t.width,t.height);r.getImageData(0,0,t.width,t.height);i({type:"SOURCE_IMAGE_LOADED",payload:{width:t.width,height:t.height,url:e}})}))}return Object(a.a)((function(){return c("https://source.unsplash.com/yRjLihK35Yw/500x250")}),[]),Object(s.jsxs)("div",{className:"App flex flex-col h-screen",children:[Object(s.jsx)("div",{className:"flex-grow",children:Object(s.jsx)("div",{className:"flex items-center\tjustify-center h-full",children:Object(s.jsx)(f,{globalState:n})})}),Object(s.jsx)("div",{className:"border-t border-gray-150 p-10 bg-white",children:Object(s.jsx)(j,{globalState:n,handleResize:function(e){var t=h(),n=t.source,r=t.target,a=o.a.new(n.getContext("2d"),n.width,n.height),c=n.width-e;requestAnimationFrame((function e(){c<=0||(!function(){a.mark_seam(),a.delete_seam();var e=a.image_data_ptr(),t=new Uint8ClampedArray(Object(o.k)().buffer,e,a.width*a.height*4);r.width=a.width,r.height=a.height;var n=new ImageData(t,a.width,a.height);r.getContext("2d").putImageData(n,0,0)}(),c-=1,requestAnimationFrame(e))})),i({type:"RESIZE_INITIALIZED"})},handleOpenImageSelect:function(){return i({type:"IMAGE_SELECT_OPENED"})}})}),Object(s.jsx)(d,{globalState:n,handleImageSelect:function(e){c(e),i({type:"IMAGE_SELECT_CLOSED"})},handleClose:function(){return i({type:"IMAGE_SELECT_CLOSED"})}})]})}b=function(){c.a.render(Object(s.jsx)(y,{}),document.getElementById("app"))},"loading"!=document.readyState?b():document.addEventListener("DOMContentLoaded",b)},10:function(e,t,n){},15:function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(3);r.q()},3:function(e,t,n){"use strict";(function(e){n.d(t,"k",(function(){return O})),n.d(t,"a",(function(){return I})),n.d(t,"i",(function(){return N})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return C})),n.d(t,"f",(function(){return k})),n.d(t,"c",(function(){return A})),n.d(t,"g",(function(){return T})),n.d(t,"j",(function(){return L})),n.d(t,"h",(function(){return D}));var r=n(13),a=n(14),i=n(15),c=new Array(32).fill(void 0);function o(e){return c[e]}c.push(void 0,null,!0,!1);var s=c.length;function u(e){var t=o(e);return function(e){e<36||(c[e]=s,s=e)}(e),t}function l(e){var t=typeof e;if("number"==t||"boolean"==t||null==e)return"".concat(e);if("string"==t)return'"'.concat(e,'"');if("symbol"==t){var n=e.description;return null==n?"Symbol":"Symbol(".concat(n,")")}if("function"==t){var r=e.name;return"string"==typeof r&&r.length>0?"Function(".concat(r,")"):"Function"}if(Array.isArray(e)){var a=e.length,i="[";a>0&&(i+=l(e[0]));for(var c=1;c<a;c++)i+=", "+l(e[c]);return i+="]"}var o,s=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(s.length>1))return toString.call(e);if("Object"==(o=s[1]))try{return"Object("+JSON.stringify(e)+")"}catch(u){return"Object"}return e instanceof Error?"".concat(e.name,": ").concat(e.message,"\n").concat(e.stack):o}var d=0,h=null;function f(){return null!==h&&h.buffer===i.k.buffer||(h=new Uint8Array(i.k.buffer)),h}var m=new("undefined"===typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),g="function"===typeof m.encodeInto?function(e,t){return m.encodeInto(e,t)}:function(e,t){var n=m.encode(e);return t.set(n),{read:e.length,written:n.length}};function b(e,t,n){if(void 0===n){var r=m.encode(e),a=t(r.length);return f().subarray(a,a+r.length).set(r),d=r.length,a}for(var i=e.length,c=t(i),o=f(),s=0;s<i;s++){var u=e.charCodeAt(s);if(u>127)break;o[c+s]=u}if(s!==i){0!==s&&(e=e.slice(s)),c=n(c,i,i=s+3*e.length);var l=f().subarray(c+s,c+i);s+=g(e,l).written}return d=s,c}var j=null;function v(){return null!==j&&j.buffer===i.k.buffer||(j=new Int32Array(i.k.buffer)),j}var p=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function x(e,t){return p.decode(f().subarray(e,e+t))}function y(e){s===c.length&&c.push(c.length+1);var t=s;return s=c[t],c[t]=e,t}p.decode();var w=32;function O(){return u(i.p())}function E(e,t){try{return e.apply(this,t)}catch(n){i.g(y(n))}}var I=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();i.d(e)}},{key:"width",get:function(){return i.c(this.ptr)>>>0},set:function(e){i.f(this.ptr,e)}},{key:"height",get:function(){return i.b(this.ptr)>>>0},set:function(e){i.e(this.ptr,e)}},{key:"mark_seam",value:function(){i.n(this.ptr)}},{key:"delete_seam",value:function(){i.l(this.ptr)}},{key:"image_data_ptr",value:function(){return i.m(this.ptr)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(t,n,r){try{var a=i.o(function(e){if(1==w)throw new Error("out of js stack");return c[--w]=e,w}(t),n,r);return e.__wrap(a)}finally{c[w++]=void 0}}}]),e}();function N(e){u(e)}function _(){return E((function(e,t,n,r,a){return y(o(e).getImageData(t,n,r,a))}),arguments)}function S(e,t){var n=function(e,t){var n=t(1*e.length);return f().set(e,n/1),d=e.length,n}(o(t).data,i.i),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function C(){return y(new Error)}function k(e,t){var n=b(o(t).stack,i.i,i.j),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function A(e,t){try{console.error(x(e,t))}finally{i.h(e,t)}}function T(e,t){var n=b(l(o(t)),i.i,i.j),r=d;v()[e/4+1]=r,v()[e/4+0]=n}function L(e,t){throw new Error(x(e,t))}function D(){return y(i.k)}}).call(this,n(12)(e))}}]);
//# sourceMappingURL=3.7ebe7bca.chunk.js.map