(this["webpackJsonpcontent-aware-image-resizer"]=this["webpackJsonpcontent-aware-image-resizer"]||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(15),a=n(6),c=n(8),u=n(3);var o=n(5);function s(){return{source:document.getElementById("canvas-source"),target:document.getElementById("canvas-target")}}var d=function(e){var t=e.globalState.display,n="SOURCE"===t?"":"hidden",r="TARGET"===t?"":"hidden";return Object(o.jsxs)("div",{className:"border-8 border-gray-600 border-opacity-5",children:[Object(o.jsx)("div",{className:n,children:Object(o.jsx)("canvas",{id:"canvas-source"})}),Object(o.jsx)("div",{className:r,children:Object(o.jsx)("canvas",{id:"canvas-target"})})]})};function l(e){var t=e.minWidth,n=e.maxWidth,i=e.onChange,c=Object(a.c)(n),u=Object(r.a)(c,2),s=u[0],d=u[1];return Object(o.jsxs)("div",{className:"flex",children:[Object(o.jsx)("input",{id:"resize",name:"resize",type:"range",className:"w-80 mr-3",min:t,max:n,value:s,onChange:function(e){var t=parseInt(e.target.value);d(t),i(t)}}),Object(o.jsxs)("label",{for:"resize",children:[s,"px"]})]})}function f(){return Object(o.jsx)("div",{className:"flex",children:Object(o.jsx)("input",{id:"resize",name:"resize",type:"range",className:"w-80 mr-3",disabled:!0})})}var h,b=function(e){var t=e.globalState,n=e.handleResize,i=t.display,c=t.sourceWidth,u=Object(a.c)(0),s=Object(r.a)(u,2),d=s[0],h=s[1],b="SOURCE"===i&&0!==d&&d!==c;return Object(o.jsxs)("div",{className:"Controls",children:[Object(o.jsx)("div",{className:"pb-3",children:"SOURCE"===i?Object(o.jsx)(l,{minWidth:20,maxWidth:c,onChange:h}):Object(o.jsx)(f,{})}),Object(o.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",disabled:!b,onClick:function(){return n(d)},children:"Resize Image"})]})},g=(n(10),{display:"INITIALIZED",sourceWidth:0,sourceHeight:0});function v(e,t){switch(t.type){case"SOURCE_IMAGE_LOADED":var n=t.payload,r=n.width,a=n.height;return Object(i.a)(Object(i.a)({},e),{},{display:"SOURCE",sourceWidth:r,sourceHeight:a});case"RESIZE_INITIALIZED":return Object(i.a)(Object(i.a)({},e),{},{display:"TARGET"});default:throw new Error("Unknown action type in reducer.")}}function j(){var e=Object(a.b)(v,g),t=Object(r.a)(e,2),n=t[0],i=t[1];return Object(a.a)((function(){var e=s().source;return fetch("https://source.unsplash.com/yRjLihK35Yw/500x250").then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e)})).then((function(t){e.width=t.width,e.height=t.height;var n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height,0,0,e.width,e.height);n.getImageData(0,0,e.width,e.height);i({type:"SOURCE_IMAGE_LOADED",payload:{width:e.width,height:e.height}})}))}),[]),Object(o.jsxs)("div",{className:"App flex flex-col h-screen",children:[Object(o.jsx)("div",{className:"flex-grow",children:Object(o.jsx)("div",{className:"flex items-center\tjustify-center h-full",children:Object(o.jsx)(d,{globalState:n})})}),Object(o.jsx)("div",{className:"border-t border-gray-150 p-10 bg-white",children:Object(o.jsx)(b,{globalState:n,handleResize:function(e){var t=s(),n=t.source,r=t.target,a=u.a.new(n.getContext("2d"),n.width,n.height),c=n.width-e;requestAnimationFrame((function e(){c<=0||(!function(){a.mark_seam(),a.delete_seam();var e=a.image_data_ptr(),t=new Uint8ClampedArray(Object(u.k)().buffer,e,a.width*a.height*4);r.width=a.width,r.height=a.height;var n=new ImageData(t,a.width,a.height);r.getContext("2d").putImageData(n,0,0)}(),c-=1,requestAnimationFrame(e))})),i({type:"RESIZE_INITIALIZED"})}})})]})}h=function(){c.a.render(Object(o.jsx)(j,{}),document.getElementById("app"))},"loading"!=document.readyState?h():document.addEventListener("DOMContentLoaded",h)},10:function(e,t,n){},14:function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(3);r.q()},3:function(e,t,n){"use strict";(function(e){n.d(t,"k",(function(){return x})),n.d(t,"a",(function(){return I})),n.d(t,"i",(function(){return k})),n.d(t,"d",(function(){return _})),n.d(t,"b",(function(){return A})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return S})),n.d(t,"c",(function(){return C})),n.d(t,"g",(function(){return D})),n.d(t,"j",(function(){return R})),n.d(t,"h",(function(){return T}));var r=n(12),i=n(13),a=n(14),c=new Array(32).fill(void 0);function u(e){return c[e]}c.push(void 0,null,!0,!1);var o=c.length;function s(e){var t=u(e);return function(e){e<36||(c[e]=o,o=e)}(e),t}function d(e){var t=typeof e;if("number"==t||"boolean"==t||null==e)return"".concat(e);if("string"==t)return'"'.concat(e,'"');if("symbol"==t){var n=e.description;return null==n?"Symbol":"Symbol(".concat(n,")")}if("function"==t){var r=e.name;return"string"==typeof r&&r.length>0?"Function(".concat(r,")"):"Function"}if(Array.isArray(e)){var i=e.length,a="[";i>0&&(a+=d(e[0]));for(var c=1;c<i;c++)a+=", "+d(e[c]);return a+="]"}var u,o=/\[object ([^\]]+)\]/.exec(toString.call(e));if(!(o.length>1))return toString.call(e);if("Object"==(u=o[1]))try{return"Object("+JSON.stringify(e)+")"}catch(s){return"Object"}return e instanceof Error?"".concat(e.name,": ").concat(e.message,"\n").concat(e.stack):u}var l=0,f=null;function h(){return null!==f&&f.buffer===a.k.buffer||(f=new Uint8Array(a.k.buffer)),f}var b=new("undefined"===typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8"),g="function"===typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function v(e,t,n){if(void 0===n){var r=b.encode(e),i=t(r.length);return h().subarray(i,i+r.length).set(r),l=r.length,i}for(var a=e.length,c=t(a),u=h(),o=0;o<a;o++){var s=e.charCodeAt(o);if(s>127)break;u[c+o]=s}if(o!==a){0!==o&&(e=e.slice(o)),c=n(c,a,a=o+3*e.length);var d=h().subarray(c+o,c+a);o+=g(e,d).written}return l=o,c}var j=null;function m(){return null!==j&&j.buffer===a.k.buffer||(j=new Int32Array(a.k.buffer)),j}var p=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function y(e,t){return p.decode(h().subarray(e,e+t))}function w(e){o===c.length&&c.push(c.length+1);var t=o;return o=c[t],c[t]=e,t}p.decode();var O=32;function x(){return s(a.p())}function E(e,t){try{return e.apply(this,t)}catch(n){a.g(w(n))}}var I=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.d(e)}},{key:"width",get:function(){return a.c(this.ptr)>>>0},set:function(e){a.f(this.ptr,e)}},{key:"height",get:function(){return a.b(this.ptr)>>>0},set:function(e){a.e(this.ptr,e)}},{key:"mark_seam",value:function(){a.n(this.ptr)}},{key:"delete_seam",value:function(){a.l(this.ptr)}},{key:"image_data_ptr",value:function(){return a.m(this.ptr)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"new",value:function(t,n,r){try{var i=a.o(function(e){if(1==O)throw new Error("out of js stack");return c[--O]=e,O}(t),n,r);return e.__wrap(i)}finally{c[O++]=void 0}}}]),e}();function k(e){s(e)}function _(){return E((function(e,t,n,r,i){return w(u(e).getImageData(t,n,r,i))}),arguments)}function A(e,t){var n=function(e,t){var n=t(1*e.length);return h().set(e,n/1),l=e.length,n}(u(t).data,a.i),r=l;m()[e/4+1]=r,m()[e/4+0]=n}function N(){return w(new Error)}function S(e,t){var n=v(u(t).stack,a.i,a.j),r=l;m()[e/4+1]=r,m()[e/4+0]=n}function C(e,t){try{console.error(y(e,t))}finally{a.h(e,t)}}function D(e,t){var n=v(d(u(t)),a.i,a.j),r=l;m()[e/4+1]=r,m()[e/4+0]=n}function R(e,t){throw new Error(y(e,t))}function T(){return w(a.k)}}).call(this,n(11)(e))}}]);
//# sourceMappingURL=3.337f3d75.chunk.js.map